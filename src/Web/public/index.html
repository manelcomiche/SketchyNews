<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SketchyNews - Generador d'imatges de notícies</title>

    <link href="./style.css" rel="stylesheet" type="text/css" />

    <link rel="icon" href="./assets/SketchyNewsCercle.png" type="image/x-icon" />
    <link rel="shortcut icon" href="./assets/favicon.ico" type="image/x-icon" />

    <link rel="preconnect" href="https://sketchynews.onrender.com/" />

    <meta name="title" content="SketchyNews - Generador d'imatges de notícies" />
    <meta itemprop="name" content="SketchyNews - Generador d'imatges de notícies" />
    <meta name="description"
        content="SketchyNews és un generador d'imatges de notícies através d'una potent intel·ligència artificial, donant com a resultat una imatge de notícia amb un estil únic." />
    <meta itemprop="description"
        content="SketchyNews és un generador d'imatges de notícies através d'una potent intel·ligència artificial, donant com a resultat una imatge de notícia amb un estil únic." />
    <meta name="keywords" content="SketchyNews, sketchynews, news ia generator, news generator, news ia, news image" />
    <meta itemprop="keywords"
        content="SketchyNews, sketchynews, news ia generator, news generator, news ia, news image">

    <meta name="robots" content="index, follow" />
    <meta name="language" content="Spanish" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="width" />

    <link rel="canonical" href="https://sketchynews.onrender.com/" />
    <link rel="alternate" href="https://sketchynews.onrender.com/" hreflang="es">

    <meta name="og:locale" content="es_ES" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="SketchyNews - Generador d'imatges de notícies" />
    <meta property="og:url" content="https://sketchynews.onrender.com/" />
    <meta property="og:title" content="SketchyNews - Generador d'imatges de notícies" />
    <meta property="og:description"
        content="SketchyNews és un generador d'imatges de notícies através d'una potent intel·ligència artificial, donant com a resultat una imatge de notícia amb un estil únic." />
    <meta property="og:image" content="./assets/nameBanner.png" />

    <meta name="twitter:creator" content="@manelcomiche" />
    <meta name="twitter:site" content="@manelcomiche" />
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://sketchynews.onrender.com/" />
    <meta property="twitter:title" content="SketchyNews - Generador d'imatges de notícies" />
    <meta property="twitter:description"
        content="SketchyNews és un generador d'imatges de notícies através d'una potent intel·ligència artificial, donant com a resultat una imatge de notícia amb un estil únic." />
    <meta property="twitter:image" content="./assets/nameBanner.png" />
    <meta property="twitter:image:alt" content="Banner de perfil - SketchyNews" />

    <meta name="theme-color" content="#181818" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<nav>
    <div class="bars">
        <i class="fa fa-bars"></i>
    </div>
    <ul class="nav-links">
        <li class="nav-link"><a href="#">Casa</a></li>
        <li class="nav-link"><a href="/about">Sobre la Web</a></li>
        <li class="nav-link"><a href="mailto:hola@manelcomiche.com">Contacte</a></li>
        <li class="nav-link auth"><a target="_blank" href="https://manelcomiche.com/">Portfolio</a></li>
    </ul>
</nav>

<body>
    <div class="container">
        <div class="logo-container">
            <img src="./assets/SketchyNewsCercle.png" alt="Logo" class="logo">
            <h1>SketchyNews</h1>
            <h2 style="margin-top: 8rem; color: white;">Generador d'imatges de notícies fent servir IA</h2>
        </div>

        <div class="search-box-container">
            <div class="search-box">
                <input type="text" id="url-input" placeholder="Introdueix el titular">
                <button onclick="generateImage()">Generar imagen</button>
            </div>
        </div>

        <div id="output-container"></div>

        <div class="footer">
            <p>SketchyNews és un projecte creat amb ❤️ per <a href="https://manelcomiche.com/">Manel Comiche</a></p>
        </div>
    </div>
</body>

<script>
    async function generateImage() {
        document.getElementById("output-container").innerHTML = `
        <div class="loading-container">
            <div class="loading">
                <div class="loading-text">Cargando...</div>
                <div class="loading-spinner"></div>
            </div>
        </div>`;

        let url = document.getElementById("url-input").value;

        const fetchImage = await fetch(`${process.env.HOST}/api/generate?prompt=${url}`)
        console.log("SERVICE CALLED")
        console.log(fetchImage)
        const fetchedImageURL = await fetchImage.text()

        document.getElementById("output-container").innerHTML = ``;

        document.getElementById("output-container").innerHTML += `
        <div class="output">
            <img style="width: 450px;" src="${fetchedImageURL}" alt="Output" class="output-image">
        </div>

        <div class="download-button-container">
            <a href="${fetchedImageURL}" download="output.png">
                <button>Descarregar</button>
            </a>
        </div>`;

        console.log("SERVICE DELIVERED")
    }
</script>

</html>
